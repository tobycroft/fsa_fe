"use strict";(self["webpackChunkhome_research_screen"]=self["webpackChunkhome_research_screen"]||[]).push([[914],{914:function(e,o,t){t.r(o),t.d(o,{default:function(){return l}});var s=function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"excel-container"},[t("el-card",{staticClass:"upload-box"},[t("el-upload",{ref:"uploadRef",staticClass:"upload-style",attrs:{action:e.apiUrl+"/v1/excel/index/index?token=theposter","http-request":e.httpRequest,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"file-list":e.fileList,"on-success":e.onSuccess,"on-error":e.onError}},[t("el-button",{staticClass:"import-excel-btn-style",attrs:{size:"small",type:"primary"}},[e._v("点击导入Excel")]),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1)],1)},n=[],i={data(){return{associationInfo:{},environment:null,apiUrl:"http://api.fsa.familyeducation.org.cn",fileList:[]}},watch:{"$store.getters.associationInfo":function(e){this.associationInfo=e}},created(){this.$store.dispatch("association/associationInfoDomainAPI"),this.environment=this.$route.params.environment,this.associationInfo=this.$store.getters.associationInfo,console.log("associationInfo :>> ",this.$store.getters.associationInfo)},methods:{async httpRequest(e){console.log("params :>> ",e);const o=new FormData;o.append("file",e.file),console.log("formData :>> ",o),console.log("this.$request :>> ",this.$request);const t=await this.$request("excel.uploadExcel",o,{checkRes:!1});t.code&&0!==t.code&&e.onError(t.echo),e.onSuccess(),console.log("Excel文件上传res :>> ",t),"lecture"!==this.environment?this.instructorUploadApi(t,this.associationInfo.id):this.lectureUploadApi(t,this.associationInfo.id)},onSuccess(e,o,t){},onError(e,o,t){this.$message.error("上传失败!")},async lectureUploadApi(e,o){const t={aid:o,json:JSON.stringify(e)},s=await this.$request("excel.lectureUpload",t);console.log("讲座批量上传res :>> ",s),s.code&&0!==s.code&&this.$confirm(`data:>>${JSON.stringify(s.data)}______echo:>>${s.echo}`).then((e=>{done()})).catch((e=>{}))},async instructorUploadApi(e,o){const t={aid:o,json:JSON.stringify(e)},s=await this.$request("excel.instructorUpload",t);console.log("教师批量上传res :>> ",s),s.code&&0!==s.code&&this.$confirm(`data:>>${JSON.stringify(s.data)}______echo:>>${s.echo}`).then((e=>{done()})).catch((e=>{}))},handleRemove(e,o){console.log(e,o)},handlePreview(e){console.log(e)},beforeRemove(e,o){return this.$confirm(`确定移除 ${e.name}？`)}}},a=i,r=t(1001),c=(0,r.Z)(a,s,n,!1,null,"cd6282ee",null),l=c.exports}}]);
//# sourceMappingURL=914.01f3fcbe.js.map