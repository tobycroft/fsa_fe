"use strict";(self["webpackChunkhome_research_screen"]=self["webpackChunkhome_research_screen"]||[]).push([[914],{914:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"excel-container"},[n("el-card",{staticClass:"upload-box"},[n("el-upload",{ref:"uploadRef",staticClass:"upload-style",attrs:{action:e.apiUrl+"/v1/excel/index/index?token=theposter","http-request":e.httpRequest,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"file-list":e.fileList,"on-success":e.onSuccess,"on-error":e.onError}},[n("el-button",{staticClass:"import-excel-btn-style",attrs:{size:"small",type:"primary"}},[e._v("点击导入Excel")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 只能上传jpg/png文件，且不超过500kb ")])],1)],1)],1)},r=[],s=n(6198),a=(n(8862),n(2222),n(8309),n(5666),{data:function(){return{associationInfo:{},environment:null,apiUrl:"https://api.fsa.familyeducation.org.cn",fileList:[]}},watch:{"$store.getters.associationInfo":function(e){this.associationInfo=e}},created:function(){this.$store.dispatch("association/associationInfoDomainAPI"),this.environment=this.$route.params.environment,this.associationInfo=this.$store.getters.associationInfo,console.log("associationInfo :>> ",this.$store.getters.associationInfo)},methods:{httpRequest:function(e){var t=this;return(0,s.Z)(regeneratorRuntime.mark((function n(){var o,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("params :>> ",e),o=new FormData,o.append("file",e.file),console.log("formData :>> ",o),console.log("this.$request :>> ",t.$request),n.next=7,t.$request("excel.uploadExcel",o,{checkRes:!1});case 7:if(r=n.sent,r.code&&0!==r.code&&e.onError(r.echo),e.onSuccess(),console.log("Excel文件上传res :>> ",r),"lecture"!==t.environment){n.next=14;break}return t.lectureUploadApi(r,t.associationInfo.id),n.abrupt("return");case 14:t.instructorUploadApi(r,t.associationInfo.id);case 15:case"end":return n.stop()}}),n)})))()},onSuccess:function(e,t,n){},onError:function(e,t,n){this.$message.error("上传失败!")},lectureUploadApi:function(e,t){var n=this;return(0,s.Z)(regeneratorRuntime.mark((function o(){var r,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r={aid:t,json:JSON.stringify(e)},o.next=3,n.$request("excel.lectureUpload",r);case 3:s=o.sent,console.log("讲座批量上传res :>> ",s),s.code&&0!==s.code&&n.$confirm("data:>>".concat(JSON.stringify(s.data),"______echo:>>").concat(s.echo)).then((function(e){done()})).catch((function(e){}));case 6:case"end":return o.stop()}}),o)})))()},instructorUploadApi:function(e,t){var n=this;return(0,s.Z)(regeneratorRuntime.mark((function o(){var r,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return r={aid:t,json:JSON.stringify(e)},o.next=3,n.$request("excel.instructorUpload",r);case 3:s=o.sent,console.log("教师批量上传res :>> ",s),s.code&&0!==s.code&&n.$confirm("data:>>".concat(JSON.stringify(s.data),"______echo:>>").concat(s.echo)).then((function(e){done()})).catch((function(e){}));case 6:case"end":return o.stop()}}),o)})))()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))}}}),c=a,i=n(1001),l=(0,i.Z)(c,o,r,!1,null,"cd6282ee",null),u=l.exports}}]);
//# sourceMappingURL=914-legacy.f3ae0bc9.js.map