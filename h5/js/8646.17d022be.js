"use strict";(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[8646],{68646:function(t,e,s){s.r(e),s.d(e,{default:function(){return h}});var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-show-container"},[s("van-swipe",{ref:"swipe",attrs:{"show-indicators":!1,immediate:!1},on:{change:t.changeSwipe}},[s("van-swipe-item",[s("TopList",{staticClass:"card-row-style",attrs:{title:"近期宣讲区域列表",list:t.recentPreachAreaListCmp,showSort:!1},on:{click:t.goToPreachingArea}})],1),s("van-swipe-item",[s("TopList",{staticClass:"card-row-style",attrs:{title:"近期承办单位列表",list:t.topListUndertakeCmp,showSort:!1},on:{click:t.goToRecentUndertakingUnit}})],1),s("van-swipe-item",[s("TableList",{staticClass:"card-row-style",attrs:{title:"近期宣讲详情",columns:t.cloumnListRecentAboutDetails,list:t.preachListRecentAboutDetailsCmp,showSort:!1},on:{click:t.goToRecentAboutDetails}})],1),s("van-swipe-item",[s("TopList",{attrs:{title:"宣讲区域覆盖人数排名",list:t.topListCoverCmp},on:{click:t.goToPreachRegionalCoverageNumberRank}})],1),s("van-swipe-item",[s("TableList",{staticClass:"card-row-style",attrs:{title:"授课老师宣讲数据排名",columns:t.cloumnListPreach,list:t.instructorListCmp},on:{click:t.goToTeacherSpeakingRank}})],1),s("van-swipe-item",[s("ColumnChart",{staticClass:"card-row-style",attrs:{title:"新增宣讲覆盖人数",list:t.dateCoverListCmp},on:{click:t.goToAddPreachCovers}})],1)],1)],1)},r=[],o=s(76711),a={components:{TabsNum:()=>s.e(4787).then(s.bind(s,64787)),TopList:()=>s.e(6185).then(s.bind(s,16185)),ColumnChart:()=>s.e(6320).then(s.bind(s,92197)),TableList:()=>s.e(569).then(s.bind(s,90569))},props:{active:{type:Number,default:0,required:!0}},computed:{recentPreachAreaListCmp(){const t=[];return this.recentList.forEach((e=>{t.push({label:this.handleAreaText(e),value:this.handleDateFormat(e.start_date)})})),t},topListUndertakeCmp(){const t=[];return this.recentList.forEach((e=>{t.push({label:e.host_info.name,value:this.handleDateFormat(e.start_date)})})),console.log("近期承办单位列表arr :>> ",t),t},preachListRecentAboutDetailsCmp(){const t=[];return this.recentList.forEach((e=>{t.push({...e.instructor_info,title:e.title,visitor:`${e.visitor}人`})})),console.log("近期宣讲详情arr :>> ",t),t},topListCoverCmp(){const t=[];return this.coverList.forEach((e=>{console.log("item :>> ",e);for(const s of t)if(s.name===e.city)return void(s.value+=e.sum_visitor);t.push({label:this.handleAreaText(e),value:`${e.sum_visitor}人`})})),console.log("排行榜:覆盖arr :>> ",t),t},instructorListCmp(){console.log("debug :>> ",this.instructorList);const t=[];for(const e in this.instructorList)t.push({rankingName:`第${parseInt(e)+1}名`,name:this.instructorList[e].instructor_info?this.instructorList[e].instructor_info.name:"",visitorStr:`${this.instructorList[e].instructor_info?this.instructorList[e].sum_visitor:0}人`,roundStr:`${this.instructorList[e].host_time}场`});return t},dateCoverListCmp(){const t=[];return this.dateCoverList.forEach((e=>{t.push({label:this.$dateFormat(e.g_date,"m/dd"),num:e.sum_visitor}),console.log("arr :>> ",t)})),t}},data(){return{cloumnListPreach:[{label:"姓名",keyName:"name"},{label:"听课人数",keyName:"visitorStr"},{label:"场次",keyName:"roundStr"}],topListUndertake:[{label:"福州市台江区上海街道社区",value:"2022年2月25日"},{label:"福州市台江区上海街道社区",value:"2022年2月25日"},{label:"福州市台江区上海街道社区",value:"2022年2月25日"},{label:"福州市台江区上海街道社区",value:"2022年2月25日"}],cloumnListRecentAboutDetails:[{label:"宣讲主题",keyName:"title"},{label:"主讲人",keyName:"name",width:70},{label:"听课人数",keyName:"visitor",width:80}],recentList:[],coverList:[],instructorList:[],dateCoverList:[]}},created(){this.recentListAPI(),this.coverListAPI(),this.instructorListAPI(),this.dateCoverListAPI()},methods:{changeSwipe(t){this.$emit("change",t)},activeSwipe(t){this.$refs.swipe.swipeTo(t)},async recentListAPI(){const t=this.$store.getters.associationInfo.id,e={aid:t},s=await this.$request("lecture.recentList",e);console.log("近期列表API_res :>> ",s),this.recentList=s},async coverListAPI(){const t=this.$store.getters.associationInfo.id,e=(0,o.Y_)(this.$store.getters.associationInfo.model_type),s={aid:t,type:e},i=await this.$request("common.coverList",s);console.log("覆盖列表API_res :>> ",i),this.coverList=i},async instructorListAPI(){const t=this.$store.getters.associationInfo.id,e={aid:t},s=await this.$request("lecture.instructorList",e);console.log("授课老师排名列表API_res :>> ",s),this.instructorList=s},async dateCoverListAPI(){const t=this.$store.getters.associationInfo.id,e={type:"none",aid:t},s=await this.$request("lecture.dateCoverList",e);console.log("日期覆盖列表API_res :>> ",s),this.dateCoverList=s},handleDateFormat(t){return this.$dateFormat(t,"yyyy年mm月dd日")},handleAreaText(t){return`${t.province}${t.city}${t.district}${t.street}`},goToPreachingArea(){this.$router.push({path:"/preachingArea"})},goToRecentUndertakingUnit(){this.$router.push({path:"/recentUndertakingUnit"})},goToRecentAboutDetails(){this.$router.push({path:"/recentAboutDetails"})},goToPreachRegionalCoverageNumberRank(){this.$router.push({path:"/preachRegionalCoverageNumberRank"})},goToTeacherSpeakingRank(){this.$router.push({path:"/teacherSpeakingRank"})},goToAddPreachCovers(){this.$router.push({path:"/addPreachCovers"})}}},n=a,c=s(1001),l=(0,c.Z)(n,i,r,!1,null,"7b6bf3f1",null),h=l.exports}}]);
//# sourceMappingURL=8646.17d022be.js.map