"use strict";(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[9059],{49059:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"host-edit-container"},[n("van-form",{on:{submit:e.onSubmit}},[n("AvatarUpload",{staticClass:"avatar-upload-style",attrs:{src:e.icon},on:{change:e.changeAvatar}}),n("CardForm",{staticClass:"card-form-style"},[n("van-field",{attrs:{name:"name",label:"名称",placeholder:"请输入单位全称",rules:[{required:!0,message:"请输入单位全称"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),n("CardForm",{staticClass:"card-form-style"},[n("van-field",{attrs:{name:"nickname",label:"经办人姓名",placeholder:"请输入经办人姓名",disabled:"",rules:[{required:!0,message:"请输入经办人姓名"}]},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),n("CardForm",{staticClass:"card-form-style"},[n("van-field",{attrs:{name:"tel",label:"经办人手机号",placeholder:"请输入经办人手机号",disabled:"",rules:[{required:!0,message:"请输入经办人手机号"}]},scopedSlots:e._u([{key:"button",fn:function(){return[n("div",{staticClass:"change-phone-btn",on:{click:function(t){return e.$router.push("editPhone")}}},[e._v(" 修改手机号 ")])]},proxy:!0}]),model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}})],1),n("CardForm",{staticClass:"card-form-style"},[n("van-field",{attrs:{name:"student",label:"学生人数",placeholder:"请输入学生人数",rules:[{required:!0,message:"请输入学生人数"}]},model:{value:e.student,callback:function(t){e.student=t},expression:"student"}})],1),n("CardForm",{staticClass:"card-form-style"},[n("van-field",{attrs:{name:"employee",label:"教职工人数",placeholder:"请输入教职工人数",rules:[{required:!0,message:"请输入教职工人数"}]},model:{value:e.employee,callback:function(t){e.employee=t},expression:"employee"}})],1),n("div",{staticClass:"submit-btn-box"},[n("van-button",{staticClass:"submit-btn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 修改 ")])],1)],1)],1)},a=[],o=n(16198),r=(n(35666),n(41539),n(78783),n(33948),n(74916),n(15306),n(68309),{components:{AvatarUpload:function(){return n.e(6075).then(n.bind(n,96075))},CardForm:function(){return n.e(7329).then(n.bind(n,77329))}},watch:{"$store.getters.hostMenberMe":function(){this.setEchoHostInfo()},"$store.getters.hostInfo":function(){this.setEchoHostInfo()}},data:function(){return{aid:null,hid:null,icon:"",name:"",nickname:"",tel:"",student:"",employee:""}},created:function(){this.initData()},methods:{initData:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.aid=e.$store.getters.associationInfo.id,n=e.$store.dispatch("host/hostMemberMeAPI",e.aid),e.hid=e.$store.getters.hostMenberMe.hid,n||e.$dialog.alert({title:"暂无权限",message:"当前账户暂无主办方管理权限!"}).then((function(){e.$router.replace({path:"/"})})),e.$store.dispatch("host/hostInfoGetAPI",e.hid),e.setEchoHostInfo();case 6:case"end":return t.stop()}}),t)})))()},setEchoHostInfo:function(){var e=this.$store.getters.hostMenberMe,t=this.$store.getters.hostInfo;console.log("设置表单回显数据 :>> ",e,t),this.icon=t.icon,this.name=t.name,this.nickname=e.name,this.tel=e.tel,this.student=t.student,this.employee=t.employee},changeAvatar:function(e){console.log("头像图片地址 :>> ",e),this.icon=e},hostInfoEditAPI:function(e){var t=this;return(0,o.Z)(regeneratorRuntime.mark((function n(){var s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:s={id:t.hid,icon:t.icon,name:e.name,info:"",img:"",employee:e.employee,student:e.student},a=t.$request("host.hostInfoEdit",s),console.log("修改主办方信息API_res :>> ",a),t.$toast("修改成功!");case 4:case"end":return n.stop()}}),n)})))()},onSubmit:function(e){console.log("submit",e),this.hostInfoEditAPI(e)}}}),i=r,l=n(1001),c=(0,l.Z)(i,s,a,!1,null,"1c1242cf",null),u=c.exports}}]);
//# sourceMappingURL=9059-legacy.495fba04.js.map