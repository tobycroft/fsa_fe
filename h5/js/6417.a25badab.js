"use strict";(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[6417],{56417:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lecturer-management-container"},[a("header",[a("van-search",{attrs:{background:"#fff",placeholder:"请输入主讲人名字"},on:{search:t.onSearch,clear:t.onClear},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("main",[a("p",{staticClass:"main-talker-box-label"},[t._v("全部主讲人("+t._s(t.total)+")")]),a("van-list",{staticClass:"main-talker-list",attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.mainTalkerList,(function(e,i){return a("li",{key:i,staticClass:"main-talker-item"},[a("MainTalker",{attrs:{avatarUrl:t.handleStrEmpty(e.img),userName:t.handleStrEmpty(e.name),patrolDistricts:e.area_count,activitySession:e.host_time,participation:e.sum_visitor,tagName:e.member_tag_name,showMore:!0},on:{update:function(a){return t.onUpdateMainTalker(e)},delete:function(a){return t.onDeleteMainTalker(e.id)}}})],1)})),0)],1)])},n=[],s={components:{MainTalker:()=>a.e(5080).then(a.bind(a,85080))},data(){return{keyword:"",currentTradeUnionID:null,mainTalkerList:[],iid:null,aid:null,limit:10,page:1,total:0,loading:!1,finished:!1,last_page:0}},async created(){await this.getMemberMe(),this.currentTradeUnionID=this.$store.getters.associationInfo.id},methods:{async onLoad(){const t=await this.mentorListAPI(this.currentTradeUnionID,this.limit,this.page,this.keyword);this.total=t.total,this.last_page=t.last_page;for(const e of t.data)this.mainTalkerList.push(e);this.loading=!1,this.page>=this.last_page&&(this.finished=!0),this.page+=1},getMemberMe(){this.aid=this.$store.getters.associationInfo.id},onUpdateMainTalker(t){console.log("MainTalker修改:>>",t),this.$router.push({path:"/speakerInformationChanges",query:{iid:t.id,aid:this.aid}})},onDeleteMainTalker(t){console.log("MainTalker删除:>>"),this.$dialog.confirm({title:"删除操作",message:"您将删除该主讲人信息，是否继续？"}).then((()=>{console.log("确认删除 :>>"),this.instructorAssociationDelAPI(t,this.aid)})).catch((()=>{console.log("取消删除 :>>")}))},handleStrEmpty(t){return t||""},async mentorListAPI(t,e,a,i){const n={aid:t,limit:e,page:a,name:i},s=await this.$request("instructor.instructorInfoSearch",n);return console.log("导师列表API_res :>> ",s),s},async instructorAssociationDelAPI(t,e){const a={iid:t,aid:e},i=await this.$request("instructor.instructorAssociationDel",a);console.log("工会-讲师-删除API_res :>> ",i),this.mentorListAPI(this.currentTradeUnionID)},onSearch(){this.page=1,this.mainTalkerList=[],this.onLoad()},onClear(){console.log("onClear :>> "),this.page=1,this.mainTalkerList=[],this.keyword="",this.onLoad()}}},o=s,r=a(1001),l=(0,r.Z)(o,i,n,!1,null,"3b4f9bb2",null),c=l.exports}}]);
//# sourceMappingURL=6417.a25badab.js.map