"use strict";(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[9059],{49059:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"host-edit-container"},[s("van-form",{on:{submit:e.onSubmit}},[s("AvatarUpload",{staticClass:"avatar-upload-style",attrs:{src:e.icon},on:{change:e.changeAvatar}}),s("CardForm",{staticClass:"card-form-style"},[s("van-field",{attrs:{name:"name",label:"名称",placeholder:"请输入单位全称",rules:[{required:!0,message:"请输入单位全称"}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),s("CardForm",{staticClass:"card-form-style"},[s("van-field",{attrs:{name:"nickname",label:"经办人姓名",placeholder:"请输入经办人姓名",disabled:"",rules:[{required:!0,message:"请输入经办人姓名"}]},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),s("CardForm",{staticClass:"card-form-style"},[s("van-field",{attrs:{name:"tel",label:"经办人手机号",placeholder:"请输入经办人手机号",disabled:"",rules:[{required:!0,message:"请输入经办人手机号"}]},scopedSlots:e._u([{key:"button",fn:function(){return[s("div",{staticClass:"change-phone-btn",on:{click:function(t){return e.$router.push("editPhone")}}},[e._v(" 修改手机号 ")])]},proxy:!0}]),model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}})],1),s("CardForm",{staticClass:"card-form-style"},[s("van-field",{attrs:{name:"student",label:"学生人数",placeholder:"请输入学生人数",rules:[{required:!0,message:"请输入学生人数"}]},model:{value:e.student,callback:function(t){e.student=t},expression:"student"}})],1),s("CardForm",{staticClass:"card-form-style"},[s("van-field",{attrs:{name:"employee",label:"教职工人数",placeholder:"请输入教职工人数",rules:[{required:!0,message:"请输入教职工人数"}]},model:{value:e.employee,callback:function(t){e.employee=t},expression:"employee"}})],1),s("div",{staticClass:"submit-btn-box"},[s("van-button",{staticClass:"submit-btn",attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v(" 修改 ")])],1)],1)],1)},n=[],o={components:{AvatarUpload:()=>s.e(6075).then(s.bind(s,96075)),CardForm:()=>s.e(7329).then(s.bind(s,77329))},watch:{"$store.getters.hostMenberMe":function(){this.setEchoHostInfo()},"$store.getters.hostInfo":function(){this.setEchoHostInfo()}},data(){return{aid:null,hid:null,icon:"",name:"",nickname:"",tel:"",student:"",employee:""}},created(){this.initData()},methods:{async initData(){this.aid=this.$store.getters.associationInfo.id;const e=this.$store.dispatch("host/hostMemberMeAPI",this.aid);this.hid=this.$store.getters.hostMenberMe.hid,e||this.$dialog.alert({title:"暂无权限",message:"当前账户暂无主办方管理权限!"}).then((()=>{this.$router.replace({path:"/"})})),this.$store.dispatch("host/hostInfoGetAPI",this.hid),this.setEchoHostInfo()},setEchoHostInfo(){const e=this.$store.getters.hostMenberMe,t=this.$store.getters.hostInfo;console.log("设置表单回显数据 :>> ",e,t),this.icon=t.icon,this.name=t.name,this.nickname=e.name,this.tel=e.tel,this.student=t.student,this.employee=t.employee},changeAvatar(e){console.log("头像图片地址 :>> ",e),this.icon=e},async hostInfoEditAPI(e){const t={id:this.hid,icon:this.icon,name:e.name,info:"",img:"",employee:e.employee,student:e.student},s=this.$request("host.hostInfoEdit",t);console.log("修改主办方信息API_res :>> ",s),this.$toast("修改成功!")},onSubmit(e){console.log("submit",e),this.hostInfoEditAPI(e)}}},i=o,l=s(1001),r=(0,l.Z)(i,a,n,!1,null,"1c1242cf",null),c=r.exports}}]);
//# sourceMappingURL=9059.614760bb.js.map