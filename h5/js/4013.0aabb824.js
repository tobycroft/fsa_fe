"use strict";(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[4013],{14013:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"members-audit-container"},[i("header",[i("van-search",{attrs:{background:"#fff",placeholder:"请输入主讲人名字"},on:{search:e.onSearch,clear:e.onClear},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),i("main",[i("van-tabs",{staticClass:"tabs-style",attrs:{color:"#0077FF"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[i("van-tab",{attrs:{title:"审核列表("+e.reviewList.length+")"}},[i("ul",{staticClass:"review-list"},[e._l(e.reviewList,(function(t,s){return i("li",{key:s,staticClass:"review-list-item"},[i("ReviewListRow",{attrs:{source:t,showOperation:""},on:{fail:function(i){return e.verifydenyAPI(t.instructor_info.iid)},success:function(i){return e.handleApprove(t.instructor_info.iid)},click:function(i){return e.goToDetail(t)}}})],1)})),i("NoRecord",{directives:[{name:"show",rawName:"v-show",value:e.reviewList.length<=0,expression:"reviewList.length <= 0"}]})],2)]),i("van-tab",{attrs:{title:"已审核"}},[i("ul",{staticClass:"review-list"},[e._l(e.approvedList,(function(t,s){return i("li",{key:s,staticClass:"review-list-item"},[i("ReviewListRow",{attrs:{source:t,status:""},on:{click:function(i){return e.goToDetail(t)}}})],1)})),i("NoRecord",{directives:[{name:"show",rawName:"v-show",value:e.approvedList.length<=0,expression:"approvedList.length <= 0"}]})],2)])],1)],1),i("SelectThe",{attrs:{show:e.showSelectThe,list:e.associationTitleList,active:e.activeSelectThe},on:{"update:show":function(t){e.showSelectThe=t},change:e.onSelectTheChange,save:e.onSave}})],1)},r=[],o=i(76711),n={components:{ReviewListRow:()=>i.e(8801).then(i.bind(i,98801)),NoRecord:()=>i.e(5847).then(i.bind(i,35847)),SelectThe:()=>i.e(9701).then(i.bind(i,29701))},data(){return{keyword:"",active:2,aid:"",iid:"",reviewList:[],approvedList:[],showSelectThe:!1,associationTitleList:[],activeSelectThe:null}},async created(){await this.getMemberMe(),this.initListData(),this.associationTitleListAPI(this.aid)},methods:{handleApprove(e){this.iid=e,this.associationTitleList.length>0?this.showSelectThe=!0:this.verifyApproveAPI(e)},async verifyApproveAPI(e,t=0){const i=this.$store.getters.associationInfo.id,s={aid:i,iid:e,mtids:t},r=await this.$request("association.verifyApprove",s);console.log("成员审核-通过_APIres :>> ",r),this.$toast.success("审核操作成功"),this.iid=null,this.activeSelectThe=null,this.showSelectThe=!1,this.initListData()},async verifydenyAPI(e){const t=this.$store.getters.associationInfo.id,i={aid:t,iid:e,mtids:0},s=await this.$request("association.verifydeny",i);console.log("成员审核-失败API_res :>> ",s),this.initListData()},goToDetail(e){console.log("row :>> ",e),this.$router.push({path:"/membersAuditDetails",query:{iid:e.instructor_info.iid,aid:e.aid}})},async getMemberMe(){this.aid=this.$store.getters.associationInfo.id},initListData(){this.instructorVerifyListAPI(this.aid,0),this.instructorVerifyListAPI(this.aid,1)},async instructorVerifyListAPI(e,t){const i={aid:e,status:t},s=await this.$request("instructor.instructorVerifyList",i);console.log("验证-列表API_res :>> ",s),0===t&&(this.reviewList=s),1===t&&(this.approvedList=s)},onSearch(){this.reviewList=(0,o.o1)(this.reviewList,this.keyword),this.approvedList=(0,o.o1)(this.approvedList,this.keyword)},onClear(){console.log("onClear :>> "),this.initListData()},async associationTitleListAPI(e){const t={aid:e},i=await this.$request("association.associationTitleList",t);console.log("获取职称列表API_res :>> ",i),this.associationTitleList=i},onSelectTheChange(e){this.activeSelectThe=e.id,console.log("this.activeSelectThe :>> ",this.activeSelectThe)},onSave(){this.activeSelectThe?this.verifyApproveAPI(this.iid,this.activeSelectThe):this.$toast("请选择身份")}}},a=n,c=i(1001),l=(0,c.Z)(a,s,r,!1,null,"cff46cda",null),h=l.exports},76711:function(e,t,i){function s(e,t){return e&&t?e/t*100:(console.log("percentage函数参数异常: :>> ",e,t),0)}i.d(t,{Ef:function(){return c},e9:function(){return s},fS:function(){return a},i_:function(){return o},o1:function(){return n},og:function(){return l},rm:function(){return r}});const r=(e,t)=>{let i=new Date(Date.parse(e)),s=new Date(Date.parse(t));return i>s},o=(e,t,i)=>{switch(t){case"H":case"h":if("H"===i||"h"===i)return e;if("M"===i||"m"===i)return 60*e;if("S"===i||"s"===i)return 60*e*60;console.log("日期转换函数resultUnit参数不合法 :>> ");break;case"M":case"m":if("H"===i||"h"===i)return e/60;if("M"===i||"m"===i)return e;if("S"===i||"s"===i)return 60*e;console.log("日期转换函数resultUnit参数不合法 :>> ");break;case"S":case"s":if("H"===i||"h"===i)return e/60/60;if("M"===i||"m"===i)return e/60;if("S"===i||"s"===i)return e;console.log("日期转换函数resultUnit参数不合法 :>> ");break;default:console.log("日期转换函数targetUnit参数不合法 :>>");break}},n=(e,t,i="name")=>{const s=[];return e.forEach((e=>{const r=e[i].indexOf(t);r>-1&&s.push(e)})),s},a=e=>e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),c=e=>{const t=[];for(const i in e)t.push(e[i]);return t.reverse()},l=(e,t)=>{console.log("importType :>> ",e);let i="";return"default"!==e&&"a"!==e||(i="fj"),"gt"===e&&(i="gt"),i===t}}}]);
//# sourceMappingURL=4013.0aabb824.js.map