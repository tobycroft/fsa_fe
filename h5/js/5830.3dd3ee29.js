(self["webpackChunkhome_research_h5"]=self["webpackChunkhome_research_h5"]||[]).push([[5830],{55830:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return p}});var o=function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",{staticClass:"gift-bag-library-container"},[e("van-popup",{attrs:{show:t.show,round:"",position:"top"}},[e("div",{staticClass:"pop-content"},[e("p",[t._v("编辑文案")]),e("van-field",{staticClass:"input",model:{value:t.posters[t.key],callback:function(r){t.$set(t.posters,t.key,r)},expression:"posters[key]"}}),e("van-button",{attrs:{color:"#2374FF",round:""},on:{click:t.handleClose}},[t._v("确定")])],1)]),e("div",{staticClass:"poster-box",attrs:{id:"poster-box"}},[e("p",{staticClass:"poster-title",on:{click:function(r){return t.handleShow("title")}}},[t._v(" "+t._s(t.posters.title)+" ")]),e("p",{staticClass:"poster-date",on:{click:function(r){return t.handleShow("date")}}},[t._v(t._s(t.posters.date))]),e("div",{staticClass:"poster-name"},[e("span",{staticClass:"name",on:{click:function(r){return t.handleShow("name")}}},[t._v(t._s(t.posters.name))]),e("span",{staticClass:"work",on:{click:function(r){return t.handleShow("work")}}},[t._v(t._s(t.posters.work))])]),e("p",{staticClass:"poster-power van-ellipsis",on:{click:function(r){return t.handleShow("power")}}},[t._v(" "+t._s(t.posters.power)+" ")]),e("div",{staticClass:"poster-place"},[e("div",{staticClass:"img-box"},[e("div",{staticClass:"img"},[e("van-image",{staticClass:"avatar-style",attrs:{src:t.posters.imgUrl}})],1)]),e("div",{staticClass:"place-box"},[e("p",{staticClass:"char",on:{click:function(r){return t.handleShow("unit")}}},[t._v(" 举办单位："+t._s(t.posters.unit)+" ")]),e("p",{staticClass:"char",on:{click:function(r){return t.handleShow("address")}}},[t._v(" 举办地点： "+t._s(t.posters.address)+" ")]),e("p",{staticClass:"char",on:{click:function(r){return t.handleShow("number")}}},[t._v(" 参与人数："+t._s(t.posters.number)+"人 ")])])]),e("p",{staticClass:"blue-char mt"},[t._v("数据来源：福建省家庭教育研究会数智化平台")]),e("p",{staticClass:"blue-char"},[t._v("技术支持：福建亲师友科技有限公司")])]),e("div",{staticClass:"gap"}),e("footer",{staticClass:"flex"},[e("div",{staticClass:"btn custom-upload-style"},[t._v(" 自定义海报上传 "),e("input",{ref:"uploadInput",staticClass:"file-btn-style",attrs:{type:"file",accept:"image/png, image/jpeg"},on:{change:t.customUploadPoster}})]),e("div",{staticClass:"btn-blue",on:{click:t.savePosters}},[t._v("保存海报并返回")])])],1)},s=[],n=(e(82801),e(48675),e(3462),e(27719)),i={components:{uploadAvatar:()=>e.e(4857).then(e.bind(e,14857))},data(){return{lid:"",fileUpload:n.fileUpload,show:!1,key:"title",posters:{title:"",date:"",name:"",work:"主讲老师",power:"福建省家庭教育研究会副秘书长",unit:"",address:"",number:"",imgUrl:""}}},created(){this.getLid(),this.eventDetailsAPI(),this.linstructorInfoByIdAPI(this.$store.getters.lecturerInfo.id)},methods:{handleShow(t){this.show=!0,this.key=t},handleClose(){this.show=!1},handleAvatarUrl(t){this.imgUrl=t},getLid(){this.lid=this.$route.query.lid},async eventDetailsAPI(){const t={id:this.lid},r=await this.$request("lecture.eventDetails",t);console.log("讲座模块-获取信息(活动详情)API_res :>> ",r),this.posters.title=r.title,this.posters.date=this.$dateFormat(r.start_date,"yyyy年m月d日"),this.posters.unit=r.host_info.name,this.posters.address=`${r.province}${r.city}${r.district}${r.street}`,this.posters.number=r.visitor},async linstructorInfoByIdAPI(t){const r={id:t},e=await this.$request("instructor.linstructorInfoById",r);console.log("根据ID获取讲师信息API_res :>> ",e),this.posters.name=e.name,this.posters.imgUrl=e.img},dataURLtoFile(t,r){let e=this.getUint8Arr(t);return new File([e.u8arr],r,{type:e.mime})},getUint8Arr(t){let r=t.split(","),e=r[0].match(/:(.*?);/)[1],o=atob(r[1]),s=o.length,n=new Uint8Array(s);while(s--)n[s]=o.charCodeAt(s);return{u8arr:n,mime:e}},async fileUploadAPI(t){const r={file:t};return await this.$request("aoss.fileUpload",r)},async lecturePosterInstructorAPI(t,r){const e={poster_img:t,id:r};return await this.$request("lecture.lecturePosterInstructor",e)},async savePosters(){const t=document.querySelector("#poster-box"),r=await this.$html2canvas(t,{allowTaint:!0,useCORS:!0,logging:!0,scale:1.3}),e=r.toDataURL("png"),o=this.dataURLtoFile(e,"posters.png");console.log("生成的file数据 :>> ",o);const s=await this.fileUploadAPI(o);console.log("文件上传API_res :>> ",s);const n=await this.lecturePosterInstructorAPI(s,this.lid);console.log("设置导师讲座海报API_res :>> ",n),this.$toast("保存海报成功"),this.$router.go(-1)},async customUploadPoster(){const t=this.$refs.uploadInput.files[0];console.log("自定义上传海报_file :>> ",t);const r=await this.fileUploadAPI(t);await this.lecturePosterInstructorAPI(r,this.lid),this.$toast("保存海报成功"),this.$router.go(-1)}}},a=i,c=e(1001),l=(0,c.Z)(a,o,s,!1,null,"37d184ac",null),p=l.exports},25787:function(t,r,e){var o=e(17854),s=e(47976),n=o.TypeError;t.exports=function(t,r){if(s(r,t))return t;throw n("Incorrect invocation")}},24019:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},90260:function(t,r,e){"use strict";var o,s,n,i=e(24019),a=e(19781),c=e(17854),l=e(60614),p=e(70111),u=e(92597),d=e(70648),h=e(66330),f=e(68880),y=e(31320),E=e(3070).f,_=e(47976),A=e(79518),R=e(27674),v=e(5112),m=e(69711),I=c.Int8Array,T=I&&I.prototype,g=c.Uint8ClampedArray,w=g&&g.prototype,C=I&&A(I),U=T&&A(T),O=Object.prototype,S=c.TypeError,D=v("toStringTag"),P=m("TYPED_ARRAY_TAG"),N=m("TYPED_ARRAY_CONSTRUCTOR"),b=i&&!!R&&"Opera"!==d(c.opera),k=!1,x={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},$=function(t){if(!p(t))return!1;var r=d(t);return"DataView"===r||u(x,r)||u(M,r)},L=function(t){if(!p(t))return!1;var r=d(t);return u(x,r)||u(M,r)},F=function(t){if(L(t))return t;throw S("Target is not a typed array")},Y=function(t){if(l(t)&&(!R||_(C,t)))return t;throw S(h(t)+" is not a typed array constructor")},V=function(t,r,e,o){if(a){if(e)for(var s in x){var n=c[s];if(n&&u(n.prototype,t))try{delete n.prototype[t]}catch(i){try{n.prototype[t]=r}catch(l){}}}U[t]&&!e||y(U,t,e?r:b&&T[t]||r,o)}},B=function(t,r,e){var o,s;if(a){if(R){if(e)for(o in x)if(s=c[o],s&&u(s,t))try{delete s[t]}catch(n){}if(C[t]&&!e)return;try{return y(C,t,e?r:b&&C[t]||r)}catch(n){}}for(o in x)s=c[o],!s||s[t]&&!e||y(s,t,r)}};for(o in x)s=c[o],n=s&&s.prototype,n?f(n,N,s):b=!1;for(o in M)s=c[o],n=s&&s.prototype,n&&f(n,N,s);if((!b||!l(C)||C===Function.prototype)&&(C=function(){throw S("Incorrect invocation")},b))for(o in x)c[o]&&R(c[o],C);if((!b||!U||U===O)&&(U=C.prototype,b))for(o in x)c[o]&&R(c[o].prototype,U);if(b&&A(w)!==U&&R(w,U),a&&!u(U,D))for(o in k=!0,E(U,D,{get:function(){return p(this)?this[P]:void 0}}),x)c[o]&&f(c[o],P,o);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:b,TYPED_ARRAY_CONSTRUCTOR:N,TYPED_ARRAY_TAG:k&&P,aTypedArray:F,aTypedArrayConstructor:Y,exportTypedArrayMethod:V,exportTypedArrayStaticMethod:B,isView:$,isTypedArray:L,TypedArray:C,TypedArrayPrototype:U}},49920:function(t,r,e){var o=e(47293);t.exports=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},93678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},79518:function(t,r,e){var o=e(17854),s=e(92597),n=e(60614),i=e(47908),a=e(6200),c=e(49920),l=a("IE_PROTO"),p=o.Object,u=p.prototype;t.exports=c?p.getPrototypeOf:function(t){var r=i(t);if(s(r,l))return r[l];var e=r.constructor;return n(e)&&r instanceof e?e.prototype:r instanceof p?u:null}},84590:function(t,r,e){var o=e(17854),s=e(73002),n=o.RangeError;t.exports=function(t,r){var e=s(t);if(e%r)throw n("Wrong offset");return e}},73002:function(t,r,e){var o=e(17854),s=e(19303),n=o.RangeError;t.exports=function(t){var r=s(t);if(r<0)throw n("The argument can't be less than 0");return r}},48675:function(t,r,e){"use strict";var o=e(90260),s=e(26244),n=e(19303),i=o.aTypedArray,a=o.exportTypedArrayMethod;a("at",(function(t){var r=i(this),e=s(r),o=n(t),a=o>=0?o:e+o;return a<0||a>=e?void 0:r[a]}))},3462:function(t,r,e){"use strict";var o=e(17854),s=e(46916),n=e(90260),i=e(26244),a=e(84590),c=e(47908),l=e(47293),p=o.RangeError,u=o.Int8Array,d=u&&u.prototype,h=d&&d.set,f=n.aTypedArray,y=n.exportTypedArrayMethod,E=!l((function(){var t=new Uint8ClampedArray(2);return s(h,t,{length:1,0:3},1),3!==t[1]})),_=E&&n.NATIVE_ARRAY_BUFFER_VIEWS&&l((function(){var t=new u(2);return t.set(1),t.set("2",1),0!==t[0]||2!==t[1]}));y("set",(function(t){f(this);var r=a(arguments.length>1?arguments[1]:void 0,1),e=c(t);if(E)return s(h,this,e,r);var o=this.length,n=i(e),l=0;if(n+r>o)throw p("Wrong length");while(l<n)this[r+l]=e[l++]}),!E||_)},82801:function(t,r,e){"use strict";var o=e(82109),s=e(35005),n=e(79114),i=e(3070).f,a=e(92597),c=e(25787),l=e(79587),p=e(56277),u=e(93678),d=e(77741),h=e(31913),f="DOMException",y=s("Error"),E=s(f),_=function(){c(this,A);var t=arguments.length,r=p(t<1?void 0:arguments[0]),e=p(t<2?void 0:arguments[1],"Error"),o=new E(r,e),s=y(r);return s.name=f,i(o,"stack",n(1,d(s.stack,1))),l(o,this,_),o},A=_.prototype=E.prototype,R="stack"in y(f),v="stack"in new E(1,2),m=R&&!v;o({global:!0,forced:h||m},{DOMException:m?_:E});var I=s(f),T=I.prototype;if(T.constructor!==I)for(var g in h||i(T,"constructor",n(1,I)),u)if(a(u,g)){var w=u[g],C=w.s;a(I,C)||i(I,C,n(6,w.c))}}}]);
//# sourceMappingURL=5830.3dd3ee29.js.map