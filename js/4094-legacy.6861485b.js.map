{"version":3,"file":"js/4094-legacy.6861485b.js","mappings":"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","sources":["webpack://home_research_h5/./src/views/activityDetail/components/Record/index.vue?efa2","webpack://home_research_h5/src/views/activityDetail/components/Record/index.vue","webpack://home_research_h5/./src/views/activityDetail/components/Record/index.vue?cfa3","webpack://home_research_h5/./src/views/activityDetail/components/Record/index.vue","webpack://home_research_h5/./node_modules/core-js/modules/es.array.splice.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"record-container\"},[_c('div',{staticClass:\"card-box\"},[_c('p',{staticClass:\"card-title-style\"},[_vm._v(\"现场记录\")]),_c('Card',{staticClass:\"card-style\"},[_c('div',[_c('van-uploader',{staticClass:\"upload-style\",attrs:{\"before-delete\":_vm.beforeDelete,\"after-read\":_vm.afterRead,\"upload-text\":\"上传图片\",\"upload-icon\":require('@/assets/icon/add_icon.png')},model:{value:(_vm.records),callback:function ($$v) {_vm.records=$$v},expression:\"records\"}})],1),_c('div',{staticClass:\"record-footer-box flex\"},[_c('div',{staticClass:\"record-left flex-start\"},[_c('p',[_vm._v(\"学员人数\")])]),_c('div',{staticClass:\"record-right flex-end\"},[_c('p',{staticClass:\"record-label-style\"},[_vm._v(_vm._s(_vm.activityVisitor))]),_c('p',[_vm._v(\"人\")])])])])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"record-container\">\r\n    <div class=\"card-box\">\r\n      <p class=\"card-title-style\">现场记录</p>\r\n      <Card class=\"card-style\">\r\n        <div>\r\n          <van-uploader\r\n            v-model=\"records\"\r\n            class=\"upload-style\"\r\n            :before-delete=\"beforeDelete\"\r\n            :after-read=\"afterRead\"\r\n            upload-text=\"上传图片\"\r\n            :upload-icon=\"require('@/assets/icon/add_icon.png')\"\r\n          />\r\n        </div>\r\n\r\n        <!-- <div class=\"record-footer-box flex\">\r\n          <div class=\"record-left flex-start\">\r\n            <p>学员人数复核</p>\r\n            <van-image\r\n              class=\"record-left-icon-style\"\r\n              :src=\"require('@/assets/icon/time_icon.png')\"\r\n            />\r\n          </div>\r\n          <div class=\"record-right flex-end\">\r\n            <p class=\"record-label-style\">学员人数复核</p>\r\n            <p>人</p>\r\n          </div>\r\n        </div> -->\r\n        <div class=\"record-footer-box flex\">\r\n          <div class=\"record-left flex-start\">\r\n            <p>学员人数</p>\r\n            <!-- <van-image\r\n              class=\"record-left-icon-style\"\r\n              :src=\"require('@/assets/icon/time_icon.png')\"\r\n            /> -->\r\n          </div>\r\n          <div class=\"record-right flex-end\">\r\n            <p class=\"record-label-style\">{{ activityVisitor }}</p>\r\n            <p>人</p>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// // 记录2记录\r\n//   lectureRecord2Instructor: `${process.env.VUE_APP_API_URL}${process.env.VUE_APP_PREFIX_STR}/lecture/record2/instructor`,\r\n//   // 记录2列表\r\n//   lectureRecord2List: `${process.env.VUE_APP_API_URL}${process.env.VUE_APP_PREFIX_STR}/lecture/record2/list`,\r\nexport default {\r\n  components: {\r\n    Card: () => import('@/components/Card'),\r\n  },\r\n  props: {\r\n    activityId: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    activityVisitor: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      records: [],\r\n    }\r\n  },\r\n  created() {\r\n    this.getRecords()\r\n  },\r\n  methods: {\r\n    getRecords() {\r\n      this.$request('lecture.lectureRecord2List', {\r\n        lid: this.activityId,\r\n      }).then((data) => {\r\n        if (data[this.activityId] && data[this.activityId]) {\r\n          let records = []\r\n          data[this.activityId].forEach((x) => {\r\n            if (x) {\r\n              records.push({\r\n                message: '上传成功',\r\n                status: 'success',\r\n                url: x,\r\n              })\r\n            }\r\n          })\r\n          this.records = records\r\n        } else {\r\n          this.records = []\r\n        }\r\n      })\r\n    },\r\n    saveRecords() {\r\n      this.$request('lecture.lectureRecord2Instructor', {\r\n        lid: this.activityId,\r\n        title: '',\r\n        content: '',\r\n        imgs: JSON.stringify(\r\n          this.records.map((x) => {\r\n            return x.url\r\n          })\r\n        ),\r\n      }).then((res) => {\r\n        console.log(res)\r\n      })\r\n    },\r\n    beforeDelete(file, detail) {\r\n      this.$dialog\r\n        .confirm({\r\n          title: '',\r\n          message: '您将删除该现场图片，是否继续？',\r\n          confirmButtonColor: '#2374FF',\r\n          cancelButtonColor: '#999999',\r\n        })\r\n        .then(() => {\r\n          this.records.splice(detail.index, 1)\r\n          this.saveRecords()\r\n        })\r\n        .catch(() => {\r\n          console.log('取消删除 :>>')\r\n        })\r\n    },\r\n    async afterRead(file) {\r\n      file.status = 'uploading'\r\n      file.message = '上传中...'\r\n      const data = {\r\n        file: file.file,\r\n      }\r\n      const res = await this.$request('aoss.fileUpload', data)\r\n      file.status = 'success'\r\n      file.message = '上传成功'\r\n      file.url = res\r\n      this.saveRecords()\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.record-container {\r\n  .card-box {\r\n    margin-top: px(40);\r\n    .card-title-style {\r\n      font-size: px(36);\r\n      font-weight: bold;\r\n    }\r\n    .card-style {\r\n      margin-top: px(12);\r\n      padding: px(24);\r\n      .username-style {\r\n        margin-left: px(24);\r\n        font-size: px(40);\r\n        font-weight: bold;\r\n      }\r\n      .card-photo-style {\r\n        margin-right: px(12);\r\n      }\r\n\r\n      .record-upload-style {\r\n        ::v-deep .van-uploader__upload {\r\n          border-radius: px(16);\r\n          overflow: hidden;\r\n        }\r\n      }\r\n      .record-footer-box {\r\n        margin-top: px(24);\r\n        padding: px(32) 0 0 0;\r\n        border: px(1) solid #eeeeee;\r\n        .record-left {\r\n          font-size: px(30);\r\n          font-weight: bold;\r\n          .record-left-icon-style {\r\n            margin-left: px(8);\r\n            width: px(28);\r\n            height: px(28);\r\n          }\r\n        }\r\n        .record-right {\r\n          font-size: px(30);\r\n          .record-label-style {\r\n            margin-right: px(12);\r\n            color: #cccccc;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0b54471d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0b54471d&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b54471d\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","attrs","beforeDelete","afterRead","model","value","callback","$$v","records","expression","_s","activityVisitor","staticRenderFns","components","Card","props","activityId","type","String","default","data","created","getRecords","methods","$request","lid","then","x","push","message","status","url","saveRecords","title","content","imgs","JSON","stringify","console","log","res","file","detail","$dialog","confirm","confirmButtonColor","cancelButtonColor","catch","component","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","splice","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","length"],"sourceRoot":""}